<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin=""
    />
    <link rel="stylesheet" href="styles.css" />
    <script
      src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
      integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
      crossorigin=""
    ></script>
    <script src="https://api.mapbox.com/mapbox.js/plugins/leaflet-fullscreen/v1.0.1/Leaflet.fullscreen.min.js"></script>
    <link
      href="https://api.mapbox.com/mapbox.js/plugins/leaflet-fullscreen/v1.0.1/leaflet.fullscreen.css"
      rel="stylesheet"
    />
    <title>Verona Bike</title>
  </head>

  <body>
    <main>
      <!--div class=”responsive-map”> 
    <iframe src="https://www.google.com/maps/d/u/0/embed?mid=15-Oy9nbJDqOYxRoh3gnH8AGUhdizp7o&ehbc=2E312F" width="100%" height="450"></iframe>
    </div-->
      <div id="demo"></div>
      <div id="map"></div>

      <!--div class=”responsive-map”> 
    <iframe width='100%' height='400px' src="https://api.mapbox.com/styles/v1/danielepaoloni/cli5rfbpb02mv01pr1aar52wf.html?title=false&access_token=pk.eyJ1IjoiZGFuaWVsZXBhb2xvbmkiLCJhIjoiY2xieHRocW5rMGx4aDNwcW94aGNjdW50aSJ9.1XXATkHEOUquGDzZaM4wUA&zoomwheel=false#8.98/45.4976/10.8982" title="Streets" style="border:none;"></iframe>
    https://tile.thunderforest.com/cycle/{z}/{x}/{y}.png?apikey=00fef80623bc42e589b687b623114593
     L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png"
  </div-->
    </main>
  </body>
  <script>
    var x = document.getElementById("demo");
    var lat;
    var lon;
    var map;

    (function runForever() {
      getLocation();
      setTimeout(runForever, 5000);
    })();

    function getLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition);
      } else {
        x.innerHTML = "Geolocation is not supported by this browser.";
      }
    }

    function showPosition(position) {
      //x.innerHTML =
      //  "Latitude: " +
      //  position.coords.latitude +
      //  "<br>Longitude: " +
      //  position.coords.longitude;
      lat = position.coords.latitude;
      lon = position.coords.longitude;
      if (map != undefined) {
        map.setView([lat, lon], 13);
      } else {
        getMap();
      }
    }

    function getMap() {
      map = L.map("map");
      map.setView([lat, lon], 13);
      map.addControl(new L.Control.Fullscreen());
      L.tileLayer(
        "https://tile.thunderforest.com/cycle/{z}/{x}/{y}.png?apikey=00fef80623bc42e589b687b623114593",
        {
          maxZoom: 19,
          attribution:
            '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',
        }
      ).addTo(map);
      var circle = L.circle([lat, lon], {
        color: "red",
        fillColor: "#f03",
        fillOpacity: 1,
        radius: 50,
      }).addTo(map);
    }
  </script>
</html>
